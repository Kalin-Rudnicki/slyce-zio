
@start: Grammar

Grammar : "@start:" mode LookAhead? (^NT ";")+
        ;

LookAhead : "@lookAhead:" int
          ;

ElementList     * Element
                ;
LiftElementList : Element
                | ElementList "^" Element ElementList
                ;

NT          : nonTerminal NTBody
            ;
NTBody      ^ StandardNT
            | ListNT
            | AssocNT
            ;

StandardNT ^ BasicNT
           | LiftNT
           ;
BasicNT    : ":" (ElementList . "|" ^ElementList)+
           ;
LiftNT     : "^" (LiftElementList . "|" ^LiftElementList)+
           ;

ListNT   : ListType LiftElementList
         | ListType LiftElementList "." LiftElementList
         ;
ListType ^ "*"
         | "+"
         ;

AssocNT   : "~" (AssocPair . "|" ^AssocPair)+ StandardNT
          ;
AssocPair : AssocType Element
          ;
AssocType ^ "<"
          | ">"
          ;

Element       : NonOptElement "?"?
              ;
AnonList      : Element ListType
              | "(" LiftElementList ")" ListType
              | "(" LiftElementList "." LiftElementList ")" ListType
              ;
NonOptElement ^ nonTerminal
              | terminal
              | Raw
              | AnonList
              ;

Raw  : "\"" Char+ "\""
     ;
Char ^ chars
     | escChar
     ;